<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>é‡æ…¶è‡ªç”±è¡Œ 2025 - è¡Œç¨‹é è¦½</title>

  <!-- Tailwind / React / Babel CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    .text-shadow-lg { text-shadow: 0 4px 10px rgba(0,0,0,0.65); }
    .grain {
      position: relative;
      overflow: hidden;
    }
    .grain::before {
      content: "";
      pointer-events: none;
      position: absolute;
      inset: -50px;
      background-image: url("https://grainy-gradients.vercel.app/noise.svg");
      mix-blend-mode: soft-light;
      opacity: 0.55;
    }
  </style>
</head>
<body class="bg-gradient-to-br from-zinc-900 via-slate-900 to-zinc-950 min-h-screen">

  <div id="root"></div>

  <!-- é€™è£¡åŠ ä¸Š data-presets -->
  <script type="text/babel" data-presets="env,react">
    const { useState } = React;

    // --- åˆå§‹è³‡æ–™ï¼ˆä¹‹å¾Œæœƒæ”¾é€² state è£¡ï¼Œå¯è¢«å‰ç«¯ç·¨è¼¯ï¼‰ ---
    const initialTripData = {
      title: "é‡æ…¶è‡ªç”±è¡Œ 2025",
      subtitle: "æŠŠæ•…äº‹è¬›çµ¦å±±åŸè½ â€¢ 6å¤©5å¤œ",
      dateRange: "2025.12.05 - 12.10",
      weather: { temp: "8Â°", desc: "é™°å¤© / å¾®é›¨", feel: "5Â°" },

      // æ¯æ—¥è¡Œç¨‹
      days: [
        {
          date: "12/05",
          dayOfWeek: "äº”",
          fullDate: "2025-12-05",
          title: "æŠµé”é‡æ…¶ â€¢ å¤œå¥”è§£æ”¾ç¢‘",
          events: [
            { time: "19:20", type: "flight", title: "TPE âœˆ CKG", desc: "æ™šç­æ©Ÿå‰å¾€é‡æ…¶æ±ŸåŒ—æ©Ÿå ´\nå»ºè­°17é»æŠµé”æ©Ÿå ´", icon: "âœˆï¸", done: false },
            { time: "23:00", type: "airport", title: "é ˜è¡Œæ & å‡ºé—œ", desc: "ä¾æŒ‡ç¤ºé ˜è¡Œæï¼Œæº–å‚™å‰å¾€å¸‚å€", icon: "ğŸ§³", done: false },
            { time: "23:30", type: "transport", title: "æ­ä¹˜é»ƒè‰²è¨ˆç¨‹è»Šé€²åŸ", desc: "T3ï¼šå…ˆæ­é›»æ¢¯åˆ° 2F â†’ 6 è™Ÿå‡ºå£ â†’ ç©¿éèµ°å»Š â†’ ä¸‹æ‰‹æ‰¶æ¢¯\nâœ… æ’éšŠé»ƒè»Šæ‰æ˜¯æ­£è¦\nâŒ ä¸€å¾‹æ‹’çµ•é»‘è»Šå–Šåƒ¹", icon: "âš ï¸", isWarning: true, done: false },
            { time: "24:00", type: "hotel", title: "CHECK-IN éº—æ€¡é£¯åº—", desc: "é‡æ…¶è§£æ”¾ç¢‘æ´ªå´–æ´åº—\né’å¹´è·¯ 77 è™Ÿ 7 å±¤", icon: "ğŸ¨", done: false },
            { time: "24:20", type: "food", title: "è¼ƒå ´å£å¤œå¸‚åƒå®µå¤œï¼ˆé¸æ“‡æ€§ï¼‰", desc: "æ­¥è¡Œç´„ 15 åˆ†é˜\nå¥½åˆä¾†é…¸è¾£ç²‰ã€ä¹æ‘çƒ¤è…¦èŠ±ã€é¬¼åŒ…å­ã€å†°ç²‰æ¶¼è¦", icon: "ğŸŒƒ", done: false }
          ]
        },
        {
          date: "12/06",
          dayOfWeek: "å…­",
          fullDate: "2025-12-06",
          title: "è§£æ”¾ç¢‘ â€¢ å±±åŸæ­¥é“ â€¢ æ´ªå´–æ´å¤œæ™¯",
          events: [
            { time: "08:00", type: "walk", title: "è§£æ”¾ç¢‘æ™¨é–“æ•£æ­¥", desc: "åœ¨åŸå¸‚é†’ä¾†å‰å…ˆè·Ÿè§£æ”¾ç¢‘æ‰“å€‹æ‹›å‘¼\næ‰¾é«˜è™•æ‹ã€æˆ‘åœ¨é‡æ…¶ã€", icon: "ğŸ“", done: false },
            { time: "08:40", type: "food", title: "é­¯ç¥–å»Ÿæ—©å¸‚", desc: "å°æ´å¤©æ¸å¸«å‚…ç‰¹è‰²åŒ…\næ¨è–¦ï¼šé†¬è‚‰åŒ… + æ²¹èŒ¶ + è‡˜è‚‰ç³¯ç±³ç³°", icon: "ğŸ¥Ÿ", done: false },
            { time: "09:40", type: "sight", title: "å±±åŸæ­¥é“ & å±±åŸå··", desc: "å¾é ˜äº‹å·· / ä¸ƒæ˜Ÿå´—ä¸€å¸¶é–‹å§‹\nè€ç‡’é¤…ã€æ‡¸å´–æ£§é“ã€å»å»èŒ¶ã€ç†¨æ–—ç³•", icon: "ğŸï¸", done: false },
            { time: "11:00", type: "sight", title: "åå…«æ¢¯è€è¡—", desc: "èµ°é€²é˜²ç©ºæ´ã€ä¿¯ç°åå…«æ¢¯å…¨è²Œ\næ„Ÿå—æœ€è€çš„å±±åŸåœ°å½¢", icon: "ğŸ§±", done: false },
            { time: "12:00", type: "sight", title: "ç™½è±¡å±…", desc: "æ­¥è¡Œ 15â€“20 åˆ†é˜\nå°èˆªç™½è±¡å±…1è™Ÿ/ç™½è±¡å±…è¥¿é–€\né•·æ±Ÿç´¢é“ç©¿è¶Šçš„æ‰“å¡æ©Ÿä½ï¼Œçœºæœ›æ±Ÿæ™¯", icon: "ğŸ¯", done: false },
            { time: "13:30", type: "food", title: "æ±Ÿæ¹–èœ / æ¹¯åŒ…åˆé¤", desc: "é£¯æ±Ÿæ¹–ã€é›™æœ¨æ±£åŒ…ã€ç³¯å‰å°é™¢æ“‡ä¸€", icon: "ğŸš", done: false },
            { time: "14:10", type: "sight", title: "æ¹–å»£æœƒé¤¨æˆ²å°èˆ‡è€è¡—", desc: "å·²é ç´„ 14:10â€“14:50 è¡¨æ¼”\nå¤æˆ²å°ã€ç‰ŒåŠã€è¡—å··", icon: "ğŸ­", done: false },
            { time: "16:00", type: "mall", title: "ä¾†ç¦å£«å»£å ´", desc: "é€›è¡—å¹å†·æ°£ã€çœ‹æ±Ÿæ™¯ã€é †ä¾¿æ‹ç…§", icon: "ğŸ™ï¸", done: false },
            { time: "18:00", type: "rest", title: "å›é£¯åº—å°ä¼‘", desc: "è§£æ”¾ç¢‘å‘¨é‚Šè£œé«”åŠ›\næ™šä¸Šæº–å‚™åƒç«é‹", icon: "ğŸ›ï¸", done: false },
            { time: "19:00", type: "food", title: "æ˜¥ç´…ç«é‹ / å…¶ä»–ç«é‹ååº—", desc: "å‘¨æœ«äººæ½®å¤šï¼Œå»ºè­°æå‰æ’è™Ÿ\nå‚™æ¡ˆï¼šä¸çœ¼é¡ã€ç“œè¥¿è¥¿ã€é™¶å©†ã€ä¸å­ƒå­ƒ", icon: "ğŸ”¥", done: false },
            { time: "21:10", type: "sight", title: "æ´ªå´–æ´å¤œæ™¯ & åƒå»é–€å¤§æ©‹", desc: "âŒ æ²’æœ‰å¿«é€Ÿé€šé“ï¼Œä¸ç”¨ä¿¡é»ƒç‰›\næ¨è–¦ç«™åœ¨åƒå»é–€å¤§æ©‹çœ‹æ•´ç‰‡æ´ªå´–æ´", icon: "âš ï¸", isWarning: true, done: false }
          ]
        },
        {
          date: "12/07",
          dayOfWeek: "æ—¥",
          fullDate: "2025-12-07",
          title: "éµå¶ºäºŒå»  â€¢ æå­å£© â€¢ è§€éŸ³æ©‹ â€¢ åŒ—å€‰",
          events: [
            { time: "09:00", type: "food", title: "éƒ½å¸‚å»£å ´é™„è¿‘æ—©é¤", desc: "å—äº¬æ¹¯åŒ… / æ„šå°é¢ / é›è›‹æ¼¢å ¡\nçœ‹å¿ƒæƒ…é¸ä¸€é–“è¡—é‚Šå°åº—", icon: "ğŸ¥£", done: false },
            { time: "09:40", type: "sight", title: "éµå¶ºäºŒå» æ–‡å‰µåœ’", desc: "ã€Šå¾ä½ çš„å…¨ä¸–ç•Œè·¯éã€‹å–æ™¯åœ°\nå» æˆ¿ã€è€çª—ã€éšæ¢¯ä¸Šéƒ½å¾ˆå‡ºç‰‡", icon: "ğŸ“·", done: false },
            { time: "11:30", type: "sight", title: "æå­å£©è¼•è»Œç©¿æ¨“", desc: "2 è™Ÿç·šæå­å£©ç«™\næ‰¾å¥½æ©Ÿä½ç­‰ 10â€“15 åˆ†é˜å°±èƒ½æ‹åˆ°", icon: "ğŸšˆ", done: false },
            { time: "13:30", type: "food", title: "åŠ‰æ¶¼ç²‰ / æ‡·ç³§ç”Ÿç…", desc: "æå­å£©é™„è¿‘ç°¡å–®ä¸‹åˆå°é£Ÿ\nä¹Ÿå¯è¦–é£½è¶³æ„Ÿè·³é", icon: "ğŸ¥Ÿ", done: false },
            { time: "14:30", type: "sight", title: "è§€éŸ³æ©‹å•†åœˆ &ã€æˆ‘åœ¨é‡æ…¶ã€æ©Ÿä½", desc: "æ­ 2/3 è™Ÿç·šè½‰ä¹˜å‰å¾€\nå¤©æ©‹ä¸Šæ‹åœ°æ¨™å¤§è¾£æ¤’èˆ‡åŸå¸‚å¤©éš›ç·š\næ‰“è»Šå®šä½åˆ°ã€Œç­†èŒ‰è‡ªåŠ©å¥³è£ã€", icon: "ğŸ™ï¸", done: false },
            { time: "15:40", type: "sight", title: "å¡”åªç¤¾å€ â€¢ åŒ—å€‰æ–‡å‰µåœ’", desc: "è€ç¤¾å€ï¼‹å€‰åº«æ”¹å»ºæ–‡å‰µ\nå’–å•¡é¤¨ã€å°åº—ã€Kitty åº—ã€é‡æ…¶æ›¼å“ˆé “å¤œæ™¯", icon: "ğŸ—ï¸", done: false },
            { time: "17:30", type: "rest", title: "å›é£¯åº— / æˆ–å»æ³¡æ¹¯æŒ‰æ‘©", desc: "ä¸ƒæ²å’Œé¢¨ SPA / é ­é“æ¹¯è—¥æµ´é ­ç™‚\nè®“è…¿ä¼‘æ¯ä¸€ä¸‹", icon: "ğŸ›€", done: false },
            { time: "19:00", type: "food", title: "å…«ä¸€å¥½åƒè¡—ï¼šå¥½åˆä¾†é…¸è¾£ç²‰", desc: "å„å¼å°åƒé›†ä¸­åœ°\nè‹¥å‰ä¸€å¤©æ²’åƒåˆ°ç«é‹ä¹Ÿå¯æ’ä»Šå¤©", icon: "ğŸœ", done: false },
            { time: "21:00", type: "sight", title: "å¾—æ„ä¸–ç•Œ Cyberpunk å¤œæ™¯", desc: "å¾å…«ä¸€å¥½åƒè¡—æ­¥è¡Œ 7â€“10 åˆ†é˜\næ³¨æ„ 22:00 æœƒç†„ç‡ˆ", icon: "ğŸŒŒ", done: false }
          ]
        },
        {
          date: "12/08",
          dayOfWeek: "ä¸€",
          fullDate: "2025-12-08",
          title: "è€å›æ´ â€¢ å—å±±é»ƒæ¡·åŸ¡ â€¢ ä¸‹æµ©é‡Œ",
          events: [
            { time: "08:30", type: "sight", title: "è€å›æ´ï¼ˆè¥¿é–€é€²ï¼‰", desc: "ç›´æ¥æ‰“è»Šåˆ°è¥¿é–€\nä¸€è·¯å…«å¦å°ã€çŸ³åˆ»ã€å±±æ—æ­¥é“\nè¥¿é–€é€²è¥¿é–€å‡ºï¼Œè…¿åŠ›æœ€çœ", icon: "â›°ï¸", done: false },
            { time: "10:30", type: "sight", title: "é»ƒæ¡·åŸ¡è€è¡— & ä¸‰æ¯›æ•…å±…", desc: "å¾è€å›æ´æ­¥è¡Œ 5â€“10 åˆ†é˜\né †è·¯é€›é»ƒè‘›å¤é“", icon: "ğŸ˜ï¸", done: false },
            { time: "12:30", type: "food", title: "æ ¼å¤–å°é¤¨ gaagaa", desc: "å—å±±æ™¯è§€é¤å»³\nå·²å®šä½12:30\né©åˆæ…¢æ…¢åƒã€çœ‹çœ‹é•·æ±Ÿèˆ‡åŸæ™¯", icon: "ğŸ·", done: false },
            { time: "14:00", type: "shop", title: "é‡ç™¾ / æ°¸è¼è¶…å¸‚è²·ä¼´æ‰‹ç¦®", desc: "ç«é‹åº•æ–™ã€é™³éº»èŠ±ã€æ€ªå‘³èƒ¡è±†ã€åˆå·æ¡ƒç‰‡", icon: "ğŸ›ï¸", done: false },
            { time: "15:30", type: "rest", title: "å›é£¯åº—æ”¾æˆ°åˆ©å“", desc: "å°ç¡ã€æ•´ç†è¡Œæ\næº–å‚™å‚æ™šçš„å—æ¿±è·¯", icon: "ğŸ›ï¸", done: false },
            { time: "16:30", type: "walk", title: "é­¯ç¥–å»Ÿå‘¨é‚Šæ•£æ­¥ + æŒ‰æ‘©", desc: "Topia å’–å•¡ã€äººé£²ç”œæ¹¯ã€å®¶å±…åº—\nå¯é †ä¾¿åšç´è˜­æ³°æŒ‰æ‘©æˆ–è‚©é ¸", icon: "â˜•", done: false },
            { time: "17:30", type: "sight", title: "é¾é–€æµ©è€è¡—", desc: "å«è»Šå‰å¾€ç´„ 15 åˆ†é˜\næ±Ÿé‚Šå¡é“ã€è€æˆ¿å­ã€éœéœèµ°ä¸€åœˆ", icon: "ğŸŒ‰", done: false },
            { time: "19:00", type: "sight", title: "ä¸‹æµ©é‡Œå¤œé€› + æ„›æ¨‚ä¹‹åŸæ©Ÿä½", desc: "å°è·¯å¤šã€éšæ¢¯å¤šï¼Œå‹™å¿…ç©¿å¥½èµ°çš„é‹\nå¯é †è·¯çœ‹æ±Ÿé‚Šå¤œæ™¯", icon: "ğŸŒ™", done: false }
          ]
        },
        {
          date: "12/09",
          dayOfWeek: "äºŒ",
          fullDate: "2025-12-09",
          title: "ç¾…æ¼¢å¯º â€¢ é´»æ©å¯ºéŠ€æ â€¢ ç£å™¨å£ â€¢ å·´åœ‹æ™šå®´",
          events: [
            { time: "09:00", type: "food", title: "é¢å’”å’”æ—©é¤", desc: "å¹²æºœè±Œé›œéºµã€ç´…æ¹¯æŠ„æ‰‹ã€æ¤°ä¹³ dirty å’–å•¡", icon: "ğŸœ", done: false },
            { time: "10:00", type: "temple", title: "ç¾…æ¼¢å¯ºåƒæ‹œèˆ‡è€åŸå°å··", desc: "é–€ç¥¨ç´„ Â¥20ï¼Œå«ä¸‰ç‚·é¦™\næŒ‰è·¯ç·šç¹ä¸€åœˆä¸èµ°å›é ­è·¯ï¼Œå°Šé‡å¯ºè¦\nS95è¶…æ¬¡å…ƒä¸­å¿ƒDedeå’–å•¡ï¼ˆ4F)æ‹çª—æ™¯ç…§", icon: "ğŸ›•", isWarning: true, done: false },
            { time: "12:30", type: "sight", title: "é´»æ©å¯ºæ£®æ—å…¬åœ’", desc: "æ± 1 é–€é€²å…¥ï¼Œæ­¥è¡Œç´„ 15 åˆ†é˜åˆ°é´»æ©é–£\nç¾åœ¨æœ‰éŠ€ææ—", icon: "ğŸ‚", done: false },
            { time: "14:30", type: "sight", title: "ç£å™¨å£å¤é®", desc: "è€è¡—ã€å¯¶è¼ªå¯ºã€å˜‰è³“æ¨“èŒ¶é¤¨\näººæ½®å¤šï¼Œé©åˆé‚Šèµ°é‚Šåƒ", icon: "ğŸ˜ï¸", done: false },
            { time: "17:00", type: "show", title: "å·´åœ‹æ™šå®´ è®Šè‡‰ç§€", desc: "æå‰åˆ°åƒåŠ æ´»å‹•\næ™šé¤ç´„ 19:00 é–‹å ´\né‚Šçœ‹å·åŠ‡é‚Šåƒæ™šé¤(å·²è¨‚ä½)", icon: "ğŸ­", done: false }
          ]
        },
        {
          date: "12/10",
          dayOfWeek: "ä¸‰",
          fullDate: "2025-12-10",
          title: "æˆ´å®¶å·· â€¢ å›ç¨‹",
          events: [
            { time: "08:00", type: "hotel", title: "é€€æˆ¿ & è¡Œæå¯„æ”¾", desc: "ä¸­åˆå‰å®Œæˆé€€æˆ¿\nè¡Œæå…ˆå¯„åœ¨é£¯åº—æ«ƒå°", icon: "ğŸ§³", done: false },
            { time: "09:10", type: "sight", title: "æˆ´å®¶å··è€è¡— & è²“è²“ç‰†", desc: "å¾é£¯åº—æ­¥è¡Œç´„ 7 åˆ†é˜\nå´–å£æ­¥é“ã€ç™½å¤©ç‰ˆæ´ªå´–æ´è¦–è§’\ntotomato å’–å•¡åº—ã€æ¸å¯Œè²´ç«é‹ã€ä¸‰å°ºå†°", icon: "ğŸ¾", done: false },
            { time: "12:00", type: "walk", title: "å›é£¯åº—å–è¡Œæ", desc: "ç°¡å–®æ¢³æ´—æ•´è£ï¼Œæº–å‚™å‰å¾€æ©Ÿå ´", icon: "ğŸš¶â€â™€ï¸", done: false },
            { time: "13:00", type: "transport", title: "å‰å¾€æ±ŸåŒ—æ©Ÿå ´", desc: "å¯å«è»Šæˆ–åœ°éµè½‰ä¹˜\né ç•™ 1â€“1.5 å°æ™‚è»Šç¨‹èˆ‡è¾¦ç†ç™»æ©Ÿ", icon: "ğŸš•", done: false },
            { time: "15:20", type: "flight", title: "CKG âœˆ TPE", desc: "å¸¶è‘—æ²¾åˆ°ç«é‹å‘³çš„è¡£æœå›å®¶", icon: "âœˆï¸", done: false }
          ]
        }
      ],

      // è³¼ç‰©æ¸…å–®
      shopping: {
        mustBuy: [
          { name: "ç«é‹åº•æ–™", desc: "æ©‹é ­ã€ç§‹éœç­‰å“ç‰Œï¼Œè¶…å¸‚è²·åƒ¹ä½ç´„ Â¥15â€“30", checked: false },
          { name: "é™³éº»èŠ±", desc: "ç£å™¨å£é™³å»ºå¹³éº»èŠ±ï¼Œå¤šç¨®å£å‘³å¯æ··æ­", checked: false },
          { name: "åˆå·æ¡ƒç‰‡", desc: "è»Ÿç³¯ç”œè€Œä¸è†©ï¼Œé€é•·è¼©å¾ˆå®‰å…¨", checked: false },
          { name: "æ€ªå‘³èƒ¡è±†", desc: "æ¸å…„ç­‰å“ç‰Œï¼Œç•¶ä¸‹é…’èœå‰›å‰›å¥½", checked: false }
        ],
        dontBuy: [
          { name: "é‡‘è¥¿æ¢… / ç´…å¿ƒæ¢…", desc: "ç¶²ç´…èœœé¤è‰²ç´ é‡ã€åƒ¹é«˜ä¸å¿…ç‰¹åœ°è²·", icon: "âŒ", checked: false },
          { name: "æ™¯å€ç¾åˆ‡æ°´æœ", desc: "å¤šåŠæº¢åƒ¹åš´é‡ï¼Œç§¤é‡å‰å…ˆå•æ¸…æ¥š", icon: "âŒ", checked: false },
          { name: "è·¯é‚Šæ¨éŠ·èŠ±èŒ¶", desc: "é«˜ç™¼è©±è¡“å‘é»ï¼Œç›¡é‡åœ¨æ­£è¦åº—è²·èŒ¶è‘‰", icon: "âŒ", checked: false }
        ]
      },

      // é ç®—
      budget: {
        spent: 4253,
        total: 6000,
        currency: "CNY",
        items: [
          { category: "ä½å®¿", name: "éº—æ€¡é£¯åº— (5 æ™š)", cost: 1952, paid: true },
          { category: "äº¤é€š", name: "æ©Ÿç¥¨", cost: 6995, paid: true },
          { category: "é–€ç¥¨", name: "ç¾…æ¼¢å¯ºã€æ¹–å»£æœƒé¤¨ã€è€å›æ´ç­‰", cost: 180, paid: false },
          { category: "é¤é£²", name: "ç«é‹ã€æ±Ÿæ¹–èœã€å’–å•¡ç”œé»", cost: 600, paid: false }
        ],
        logs: []
      },

      truths: [
        { title: "ç«é‹è¾£åº¦è«‹å°Šé‡", desc: "é‡æ…¶çš„ã€å¾®è¾£ã€å¤§ç´„ç­‰æ–¼å¤–åœ°çš„ä¸­è¾£ï½å¤§è¾£ã€‚æœ‰è…¸èƒƒå•é¡Œè¨˜å¾—å‚™è—¥ï¼Œé»æ¸…æ¹¯é‹ä¹Ÿä¸ä¸Ÿè‡‰ã€‚", type: "warning", checked: false },
        { title: "8D åŸå¸‚å°èˆªæœƒè¿·è·¯", desc: "é‡æ…¶ç«‹é«”äº¤é€šç™¼é”ï¼Œä½†å°èˆªå¸¸åˆ†ä¸æ¸…æ¨“å±¤èˆ‡é«˜åº¦ã€‚å¤šæŠ¬é ­çœ‹è·¯ç‰Œã€å¿…è¦æ™‚ç›´æ¥å•è·¯äººã€‚", type: "info", checked: false },
        { title: "æ©Ÿå ´ & é«˜éµç«™é»‘è»Šå¤š", desc: "å‡¡æ˜¯ä¸»å‹•ä¾†æ­è©±çš„ä¸€å£åƒ¹å¹¾ä¹éƒ½æ˜¯å‘ã€‚è«‹èµ°æ­£å¼æ’éšŠé€šé“æˆ–ä½¿ç”¨ç¶²ç´„è»Šã€‚", type: "danger", checked: false },
        { title: "å…©æ±ŸéŠèˆ¹ä¸ç”¨è²· VIP", desc: "VIP è‰™ä½å¤šåŠæ˜¯æ™ºå•†ç¨…ï¼Œåœ¨å—æ¿±è·¯æˆ–å…©æ±Ÿå°æ¸¡å°±èƒ½çœ‹åˆ°å¾ˆç¾å¤œæ™¯ã€‚", type: "info", checked: false },
        { title: "æ´ªå´–æ´ä¸è¦ç¡¬é‘½æ™¯å€å…§éƒ¨", desc: "æœ€ç¾çš„è§’åº¦åœ¨åƒå»é–€å¤§æ©‹èˆ‡å°å²¸ï¼Œä¸å¿…æ“ é€²äººæµ·è£¡ã€‚", type: "info", checked: false }
      ],

      guideExtras: {
        luohansi: [
          "èµ°ä¸»è·¯ç·šï¼Œä¸€è·¯é †æ™‚é‡åƒæ‹œï¼Œä¸èµ°å›é ­è·¯ï¼Œæ¯”è¼ƒä¸è¿·è·¯ã€‚",
          "é–€ç¥¨å«ä¸‰ç‚·é¦™ï¼Œå…¥å¯ºç©¿è‘—ä»¥ç´ è‰²ã€ç«¯èŠç‚ºä¸»ï¼Œæ‹ç…§é¿å…å¤ªé è¿‘ä½›åƒã€‚",
          "å¯ä»¥æ•¸ç¾…æ¼¢ã€æŠ½å°ç±¤ã€å–ç¦ªèŒ¶ï¼Œä¹Ÿæœ‰æ›¸ç±¤ã€ç« å¡ç­‰å°æ–‡å‰µã€‚",
          "å¯ºå…§äºŒæ¨“åœ“çª—èˆ‡é›è—ç‰†åˆå¾Œå…‰å½±å¾ˆç¾ï¼Œä½†è¦ç•™æ„å®‰éœèˆ‡å‹•ç·šã€‚"
        ],
        xiahaoli: [
          "å··å¼„å¤šã€éšæ¢¯å¤šåˆé™¡ï¼Œä¸‹é›¨æ™‚è·¯æ»‘ï¼Œé‹å­å‹™å¿…å¥½èµ°ã€‚",
          "å¤œæ™¯æœ¨æ©‹æ©Ÿä½äººå¤šï¼Œæ‹ç…§æ™‚æ³¨æ„é‚Šé‚Šä¸è¦é å¤ªè¿‘ã€‚",
          "å»ºè­°æ·ºè‰²ç³»æˆ–è£™è£ï¼Œæ­è€è¡—é»ƒå…‰èˆ‡éœ“è™¹å¾ˆå¥½çœ‹ã€‚",
          "å¤œé–“äº®ç‡ˆç´„ 19:00â€“22:00ï¼Œå¤ªæ™šç‡ˆæœƒé—œã€‚"
        ],
        drinks: [
          "æè‹¥é…¸å¥¶ï¼šæœ‹å‹è©•åƒ¹ä¸€è‡´å¥½å–çš„é…¸å¥¶ã€‚",
          "ä¸€åªé…¸å¥¶ç‰›ï¼šè‘¡è„é…¸å¥¶æ…•æ–¯ç³»åˆ—æ˜¯ç†±é–€æ¬¾ã€‚",
          "ç†Šæœ¬ç‰›ä¹³ / å†·é£²åº—ï¼šè¡—é‚Šä¹Ÿæœ‰ä¸å°‘åœ¨åœ°é£²å“ã€‚",
          "ç‰¹è‰²å¥¶èŒ¶åº—ï¼šå¯æ‰¾æœ‰å±±åŸé™å®šå£å‘³çš„åšé®®ã€‚"
        ],
        foods: [
          "æµ·é ­å °è±†èŠ±ï¼šæ¯å¤©ç¾ç£¨è±†èŠ±ï¼Œå£æ„Ÿç´°å«©ã€‚",
          "é‡æ…¶å°éºµï¼šæ´‹æ²³ç¤¾å€ã€è¡—é‚Šè€éºµé¤¨éƒ½å¯è©¦è©¦ã€‚",
          "é‡æ…¶ç‚¸æ´‹èŠ‹ã€çƒ¤è…¦èŠ±ã€çƒ¤é´¨è‚ ç­‰è·¯é‚Šæ”¤å°åƒã€‚",
          "ç«é‹ & æ±Ÿæ¹–èœï¼šç›¡é‡é¸åœ¨åœ°äººä¹Ÿæœƒå»çš„åº—ã€‚"
        ]
      },

      journal: { mood: "" }
    };

    const ItineraryView = ({ data, setData, activeDay, setActiveDay }) => {
      const day = data.days[activeDay];

      const toggleEventDone = (eventIndex) => {
        setData(prev => {
          const days = [...prev.days];
          const events = [...days[activeDay].events];
          const e = events[eventIndex];
          events[eventIndex] = { ...e, done: !e.done };
          days[activeDay] = { ...days[activeDay], events };
          return { ...prev, days };
        });
      };

      const editEvent = (eventIndex) => {
        const current = data.days[activeDay].events[eventIndex];
        const newTime = window.prompt("æ™‚é–“ï¼ˆä¾‹å¦‚ 09:30ï¼‰", current.time);
        if (newTime === null) return;
        const newTitle = window.prompt("æ¨™é¡Œ", current.title);
        if (newTitle === null) return;
        const newDesc = window.prompt("å‚™è¨» / èªªæ˜", current.desc);
        if (newDesc === null) return;

        setData(prev => {
          const days = [...prev.days];
          const events = [...days[activeDay].events];
          events[eventIndex] = { ...events[eventIndex], time: newTime, title: newTitle, desc: newDesc };
          days[activeDay] = { ...days[activeDay], events };
          return { ...prev, days };
        });
      };

      return (
        <div className="flex flex-col h-full">
          {/* æ—¥æœŸé¸æ“‡ */}
          <div className="pt-6 pb-2 px-4 overflow-x-auto no-scrollbar">
            <div className="flex gap-3">
              {data.days.map((d, index) => (
                <button
                  key={index}
                  onClick={() => setActiveDay(index)}
                  className={`flex flex-col items-center justify-center min-w-[4.3rem] h-18 rounded-2xl border text-sm transition-all duration-300 ${
                    activeDay === index
                      ? "bg-emerald-900/90 border-emerald-400/80 text-emerald-50 shadow-lg shadow-emerald-900/40 scale-105"
                      : "bg-zinc-900/60 border-zinc-700 text-zinc-400 hover:border-emerald-500/40"
                  }`}
                >
                  <span className="text-[11px] mb-0.5 opacity-80">{d.dayOfWeek}</span>
                  <span className="font-semibold">{d.date}</span>
                </button>
              ))}
            </div>
          </div>

          {/* ç•¶æ—¥è³‡è¨Š */}
          <div className="px-6 flex-1 overflow-y-auto pb-8 no-scrollbar">
            <div className="flex items-center justify-between pt-4 pb-2 text-xs text-zinc-400">
              <div>
                <div className="font-semibold text-emerald-100">{day.title}</div>
                <div className="mt-0.5 text-[11px] text-zinc-500">{day.fullDate}</div>
              </div>
              <div className="flex items-center gap-2 bg-emerald-900/40 border border-emerald-700/70 px-3 py-1 rounded-full text-emerald-200">
                <span>â˜ï¸ {data.weather.temp}</span>
                <span className="text-[11px]">{data.weather.desc}</span>
              </div>
            </div>

            <div className="mt-3 space-y-6">
              {day.events.map((event, idx) => (
                <div key={idx} className="flex gap-4 group">
                  {/* æ™‚é–“è»¸ */}
                  <div className="flex flex-col items-center">
                    <div className="text-[11px] font-semibold text-zinc-500 w-12 text-right pt-1">
                      {event.time}
                    </div>
                    <div className="w-[2px] flex-1 bg-zinc-800 mt-2 rounded-full relative overflow-hidden">
                      <div
                        className={`absolute -left-[5px] top-0 w-3 h-3 rounded-full border border-zinc-900 ${
                          event.done
                            ? "bg-emerald-400 shadow shadow-emerald-400/70"
                            : event.isWarning
                            ? "bg-amber-500 shadow shadow-amber-500/60"
                            : "bg-emerald-500/70 group-hover:bg-emerald-400"
                        } transition-colors`}
                      ></div>
                    </div>
                  </div>

                  {/* å¡ç‰‡ */}
                  <div
                    className={`flex-1 p-4 rounded-2xl border shadow-sm transition-all grain ${
                      event.isWarning
                        ? "bg-gradient-to-br from-[#3b1f1c] via-[#251312] to-[#1a1412] border-red-700/60"
                        : "bg-gradient-to-br from-[#05090a] via-[#0b1113] to-[#050708] border-zinc-800/80"
                    } ${event.done ? "opacity-90" : ""}`}
                  >
                    <div className="relative z-10">
                      <div className="flex justify-between items-start mb-2">
                        <h3
                          className={`font-semibold text-sm leading-snug ${
                            event.isWarning ? "text-amber-100" : "text-emerald-50"
                          }`}
                        >
                          {event.title}
                        </h3>
                        <div className="flex items-center gap-2">
                          <div
                            className={`px-2 py-1 rounded-lg text-sm ${
                              event.isWarning
                                ? "bg-red-900/60 text-amber-200"
                                : "bg-zinc-900/70 text-emerald-200"
                            }`}
                          >
                            {event.icon}
                          </div>
                        </div>
                      </div>
                      <p
                        className={`text-xs whitespace-pre-line leading-relaxed ${
                          event.isWarning ? "text-amber-200/90" : "text-zinc-300"
                        }`}
                      >
                        {event.desc}
                      </p>

                      <div className="mt-3 flex justify-between items-center text-[11px] text-zinc-400">
                        <button
                          onClick={() => toggleEventDone(idx)}
                          className={`px-2 py-1 rounded-full border ${
                            event.done
                              ? "border-emerald-500/80 text-emerald-200 bg-emerald-900/40"
                              : "border-zinc-600 hover:border-emerald-400/70"
                          }`}
                        >
                          {event.done ? "âœ… å·²å®Œæˆ" : "â–¡ å¾…èµ°"}
                        </button>
                        <button
                          onClick={() => editEvent(idx)}
                          className="px-2 py-1 rounded-full border border-zinc-600 hover:border-emerald-400/70 hover:text-emerald-200"
                        >
                          âœ ç·¨è¼¯
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              ))}
              <div className="text-center text-[11px] text-zinc-500 pt-6 pb-2">
                End of Day â€¢ å±±åŸåœ¨å¤œè£¡æ…¢æ…¢äº®èµ·ä¾†
              </div>
            </div>
          </div>
        </div>
      );
    };

    const ShoppingView = ({ data, setData }) => {
      const { shopping } = data;

      const toggleMustBuy = (index) => {
        setData(prev => {
          const mustBuy = [...prev.shopping.mustBuy];
          mustBuy[index] = { ...mustBuy[index], checked: !mustBuy[index].checked };
          return { ...prev, shopping: { ...prev.shopping, mustBuy } };
        });
      };

      const toggleDontBuy = (index) => {
        setData(prev => {
          const dontBuy = [...prev.shopping.dontBuy];
          dontBuy[index] = { ...dontBuy[index], checked: !dontBuy[index].checked };
          return { ...prev, shopping: { ...prev.shopping, dontBuy } };
        });
      };

      return (
        <div className="pt-7 px-6 flex-1 overflow-y-auto pb-10 no-scrollbar">
          <h2 className="text-xl font-semibold text-emerald-50 mb-1">è³¼ç‰© & é¿å‘å°æŠ„</h2>
          <p className="text-[11px] text-zinc-500 mb-6">
            åœ¨è€è¡—å’Œè¶…å¸‚ä¹‹é–“ç©¿æ¢­ï¼Œå¸¶ä¸€é»å±±åŸå‘³é“å›å®¶ã€‚
          </p>

          <div className="mb-7">
            <h3 className="text-xs font-semibold text-emerald-300 tracking-[0.2em] uppercase mb-3 flex items-center gap-2">
              <span className="text-sm">â—</span> æ¨è–¦å¿…è²·ï¼ˆè¶…å¸‚ / è€è¡—ï¼‰
            </h3>
            <div className="space-y-3">
              {shopping.mustBuy.map((item, idx) => (
                <button
                  key={idx}
                  onClick={() => toggleMustBuy(idx)}
                  className="w-full text-left bg-gradient-to-r from-zinc-900/90 via-slate-900/80 to-zinc-900/90 border border-zinc-700/80 rounded-xl px-4 py-3 flex items-center gap-3 grain"
                >
                  <div className="w-5 h-5 rounded-full border flex items-center justify-center text-[11px] 
                    border-emerald-500/60 text-emerald-300 bg-black/40">
                    {item.checked ? "âœ“" : "â–¡"}
                  </div>
                  <div>
                    <div className="text-sm font-semibold text-emerald-50">
                      {item.name}
                    </div>
                    <div className="text-[11px] text-zinc-400 mt-0.5">
                      {item.desc}
                    </div>
                  </div>
                </button>
              ))}
            </div>
          </div>

          <div className="mb-7">
            <h3 className="text-xs font-semibold text-amber-300 tracking-[0.2em] uppercase mb-3 flex items-center gap-2">
              <span className="text-sm">âœ•</span> åƒè¬åˆ¥è²·ï¼ˆæ™ºå•†ç¨…é›·å€ï¼‰
            </h3>
            <div className="space-y-3">
              {shopping.dontBuy.map((item, idx) => (
                <button
                  key={idx}
                  onClick={() => toggleDontBuy(idx)}
                  className="w-full text-left bg-gradient-to-r from-[#3b1f1c] via-[#261414] to-[#160f0e] border border-red-700/60 rounded-xl px-4 py-3 flex items-center gap-3 grain"
                >
                  <span className="text-red-300 text-lg">{item.icon}</span>
                  <div className="flex-1">
                    <div className="text-sm font-semibold text-amber-100 flex justify-between items-center">
                      <span>{item.name}</span>
                      <span className="text-[10px] text-amber-200/80">
                        {item.checked ? "å·²é¿é–‹ âœ”" : "é»ä¸€ä¸‹æ¨™è¨˜å·²é¿é–‹"}
                      </span>
                    </div>
                    <div className="text-[11px] text-amber-200/80 mt-0.5">
                      {item.desc}
                    </div>
                  </div>
                </button>
              ))}
            </div>
          </div>
        </div>
      );
    };

    const BudgetView = ({ data, setData }) => {
      const { budget, journal } = data;
      const [logNote, setLogNote] = useState("");
      const [logAmount, setLogAmount] = useState("");

      const baseSpent = budget.spent || 0;
      const logs = budget.logs || [];
      const extraSpent = logs.reduce((sum, log) => sum + (Number(log.amount) || 0), 0);
      const totalSpent = baseSpent + extraSpent;
      const remaining = budget.total - totalSpent;

      const handleBaseSpentChange = (e) => {
        const value = Number(e.target.value) || 0;
        setData(prev => ({
          ...prev,
          budget: { ...prev.budget, spent: value }
        }));
      };

      const addLog = () => {
        const amountNum = Number(logAmount);
        if (!amountNum) return;
        setData(prev => ({
          ...prev,
          budget: {
            ...prev.budget,
            logs: [...(prev.budget.logs || []), { note: logNote || "æœªå‘½åæ”¯å‡º", amount: amountNum }]
          }
        }));
        setLogNote("");
        setLogAmount("");
      };

      const deleteLog = (index) => {
        setData(prev => {
          const logs = [...(prev.budget.logs || [])];
          logs.splice(index, 1);
          return {
            ...prev,
            budget: { ...prev.budget, logs }
          };
        });
      };

      const handleMoodChange = (e) => {
        const mood = e.target.value;
        setData(prev => ({
          ...prev,
          journal: { ...(prev.journal || {}), mood }
        }));
      };

      return (
        <div className="pt-7 px-6 flex-1 overflow-y-auto pb-10 no-scrollbar">
          <h2 className="text-xl font-semibold text-emerald-50 mb-1">æ—…è²»é ä¼° & ä»Šæ—¥å°å¸³æœ¬</h2>
          <p className="text-[11px] text-zinc-500 mb-6">
            ç²—ç•¥æŠ“å€‹å®‰å…¨ç¯„åœï¼Œå‰©ä¸‹çš„å°±äº¤çµ¦ç¾å ´çš„éˆæ„Ÿèˆ‡é£Ÿæ…¾ã€‚
          </p>

          <div className="relative mb-8 rounded-3xl overflow-hidden grain bg-gradient-to-br from-emerald-900 via-emerald-950 to-slate-950 border border-emerald-700/70 shadow-xl shadow-black/40">
            <div className="relative z-10 p-6">
              <div className="text-[11px] text-emerald-200/80 mb-1">ç¸½é ç®—ï¼ˆCNYï¼‰</div>
              <div className="text-3xl font-bold text-emerald-50">
                Â¥ {budget.total.toLocaleString()}
              </div>

              <div className="mt-4">
                <div className="flex-1 bg-emerald-950/70 rounded-full h-2 overflow-hidden">
                  <div
                    className="bg-amber-300 h-full"
                    style={{
                      width: `${Math.min(100, (totalSpent / budget.total) * 100).toFixed(0)}%`
                    }}
                  ></div>
                </div>
                <div className="flex justify-between mt-1.5 text-[11px] text-emerald-200/90">
                  <span>å·²æ”¯å‡ºï¼ˆå«å°è¨˜éŒ„ï¼‰ Â¥{totalSpent}</span>
                  <span>é ä¼°å‰©é¤˜ Â¥{remaining}</span>
                </div>
              </div>

              <div className="mt-4 text-[11px] text-emerald-100/80 space-y-1">
                <div>å¤§é …å·²æ”¯å‡ºï¼ˆæ©Ÿç¥¨ / è¨‚é‡‘ç­‰ï¼‰ï¼š</div>
                <input
                  type="number"
                  value={baseSpent}
                  onChange={handleBaseSpentChange}
                  className="w-full bg-black/40 border border-emerald-700/70 rounded-lg px-3 py-1.5 text-emerald-100 text-[12px] focus:outline-none focus:border-emerald-400"
                />
              </div>
            </div>
          </div>

          <div className="space-y-4 mb-7">
            {budget.items.map((item, idx) => (
              <div
                key={idx}
                className="bg-zinc-900/80 border border-zinc-700/80 rounded-2xl px-4 py-3 flex justify-between items-center grain"
              >
                <div className="flex items-center gap-3">
                  <div
                    className={`px-2 py-1 rounded-lg text-xs ${
                      item.paid
                        ? "bg-emerald-900/70 text-emerald-200 border border-emerald-600/60"
                        : "bg-amber-900/60 text-amber-200 border border-amber-700/60"
                    }`}
                  >
                    {item.paid ? "å·²æ”¯ä»˜" : "é ä¼°"}
                  </div>
                  <div>
                    <div className="text-sm font-semibold text-emerald-50">
                      {item.category}
                    </div>
                    <div className="text-[11px] text-zinc-400">{item.name}</div>
                  </div>
                </div>
                <div className="text-right">
                  <div className="text-sm font-semibold text-emerald-50">
                    Â¥{item.cost}
                  </div>
                </div>
              </div>
            ))}
          </div>

          <div className="mb-7">
            <h3 className="text-sm font-semibold text-emerald-100 mb-2">
              ä»Šæ—¥èŠ±è²»å°è¨˜éŒ„
            </h3>
            <div className="bg-zinc-900/80 border border-zinc-700/80 rounded-2xl p-3 space-y-2 grain">
              <input
                type="text"
                placeholder="ä¾‹å¦‚ï¼šå¾—æ„ä¸–ç•Œå’–å•¡ã€ç£å™¨å£å°åƒ..."
                value={logNote}
                onChange={(e) => setLogNote(e.target.value)}
                className="w-full bg-black/40 border border-zinc-700 rounded-lg px-3 py-1.5 text-[12px] text-emerald-100 focus:outline-none focus:border-emerald-400"
              />
              <div className="flex gap-2">
                <input
                  type="number"
                  placeholder="é‡‘é¡ï¼ˆCNYï¼‰"
                  value={logAmount}
                  onChange={(e) => setLogAmount(e.target.value)}
                  className="flex-1 bg-black/40 border border-zinc-700 rounded-lg px-3 py-1.5 text-[12px] text-emerald-100 focus:outline-none focus:border-emerald-400"
                />
                <button
                  onClick={addLog}
                  className="px-3 py-1.5 rounded-lg bg-emerald-500 text-slate-900 text-[12px] font-semibold hover:bg-emerald-400"
                >
                  ï¼‹ è¨˜ä¸€ç­†
                </button>
              </div>

              {logs.length > 0 && (
                <div className="mt-2 text-[11px] text-zinc-400 space-y-1">
                  {logs.map((log, idx) => (
                    <div key={idx} className="flex justify-between items-center">
                      <span>
                        â€¢ {log.note}ï¼ˆÂ¥{log.amount}ï¼‰
                      </span>
                      <button
                        onClick={() => deleteLog(idx)}
                        className="text-zinc-500 hover:text-amber-300"
                      >
                        åˆªé™¤
                      </button>
                    </div>
                  ))}
                  <div className="pt-1 text-emerald-200">
                    å°è¨˜éŒ„åˆè¨ˆï¼šÂ¥{extraSpent}
                  </div>
                </div>
              )}
            </div>
          </div>

          <div>
            <h3 className="text-sm font-semibold text-emerald-100 mb-2">
              ä»Šæ—¥å¿ƒæƒ…ä¸€å¥è©±
            </h3>
            <textarea
              rows="2"
              placeholder="ä»Šå¤©åœ¨å±±åŸï¼Œæœ€æƒ³è¨˜ä½çš„ä¸€å¥è©± / ä¸€å€‹ç•«é¢æ˜¯..."
              value={journal?.mood || ""}
              onChange={handleMoodChange}
              className="w-full bg-zinc-900/80 border border-zinc-700/80 rounded-2xl px-3 py-2 text-[12px] text-emerald-100 focus:outline-none focus:border-emerald-400 grain"
            ></textarea>
          </div>
        </div>
      );
    };

    const GuideView = ({ data, setData }) => {
      const { truths, guideExtras } = data;

      const toggleTruth = (index) => {
        setData(prev => {
          const t = [...prev.truths];
          t[index] = { ...t[index], checked: !t[index].checked };
          return { ...prev, truths: t };
        });
      };

      return (
        <div className="pt-7 px-6 flex-1 overflow-y-auto pb-10 no-scrollbar">
          <h2 className="text-xl font-semibold text-emerald-50 mb-1">é‡æ…¶æ—…éŠå¤§å¯¦è©±</h2>
          <p className="text-[11px] text-zinc-500 mb-6">
            æŠŠæ”»ç•¥è®Šæˆå¹¾å¼µå£è¢‹å¡ï¼Œé‚Šèµ°é‚Šç¿»ï¼Œæ¯”æ‰‹æ©Ÿæˆªåœ–é‚„å¥½ç”¨ã€‚
          </p>

          <div className="space-y-4 mb-7">
            {truths.map((truth, idx) => (
              <div
                key={idx}
                className={`p-4 rounded-2xl border grain cursor-pointer ${
                  truth.type === "danger"
                    ? "bg-gradient-to-br from-[#3b1f1c] via-[#251312] to-[#140c0b] border-red-700/70"
                    : truth.type === "warning"
                    ? "bg-gradient-to-br from-[#3b2a15] via-[#241a10] to-[#140f0a] border-amber-700/70"
                    : "bg-gradient-to-br from-[#041016] via-[#050b10] to-[#020608] border-emerald-700/70"
                }`}
                onClick={() => toggleTruth(idx)}
              >
                <div className="flex items-center gap-2 mb-1">
                  <span className="text-sm">
                    {truth.type === "danger"
                      ? "â›”"
                      : truth.type === "warning"
                      ? "âš ï¸"
                      : "â„¹ï¸"}
                  </span>
                  <h3
                    className={`text-sm font-semibold ${
                      truth.type === "danger"
                        ? "text-amber-100"
                        : truth.type === "warning"
                        ? "text-amber-50"
                        : "text-emerald-50"
                    }`}
                  >
                    {truth.title}
                  </h3>
                  <span className="ml-auto text-[10px] text-emerald-100/80">
                    {truth.checked ? "å·²è¨˜å¾— âœ”" : "é»ä¸€ä¸‹æ¨™è¨˜å·²è¨˜å¾—"}
                  </span>
                </div>
                <p
                  className={`text-[12px] leading-relaxed ${
                    truth.type === "danger"
                      ? "text-amber-200/90"
                      : truth.type === "warning"
                      ? "text-amber-100/90"
                      : "text-emerald-100/90"
                  }`}
                >
                  {truth.desc}
                </p>
              </div>
            ))}
          </div>

          <SectionList
            title="ç¾…æ¼¢å¯ºæ€éº¼é€›æ‰ä¸å¿ƒæ…Œï¼Ÿ"
            subtitle="è·¯ç·šé †è‘—èµ°ã€è©²èŠé‡çš„åœ°æ–¹å°±å®‰éœä¸€é»ã€‚"
            color="emerald"
            items={guideExtras.luohansi}
          />

          <SectionList
            title="ä¸‹æµ©é‡Œå¤œé€›å°æé†’"
            subtitle="è€éšæ¢¯ã€è€æˆ¿å­ã€è€è·¯ç¸«ï¼Œè¨˜å¾—çœ‹è…³ä¸‹ã€‚"
            color="amber"
            items={guideExtras.xiahaoli}
          />

          <SectionList
            title="é‡æ…¶å–ä»€éº¼ï¼Ÿ"
            subtitle="æŠŠèƒƒç•™ä¸€é»çµ¦é…¸å¥¶å’Œåœ¨åœ°é£²æ–™ã€‚"
            color="emerald"
            items={guideExtras.drinks}
          />

          <SectionList
            title="é‡æ…¶åƒä»€éº¼ï¼Ÿï¼ˆç«é‹ä¹‹å¤–ï¼‰"
            subtitle="è±†èŠ±ã€å°éºµã€æ´‹èŠ‹ï¼Œéƒ½æ˜¯è¨˜æ†¶è£¡çš„å‘³é“ã€‚"
            color="emerald"
            items={guideExtras.foods}
          />

          <div className="mt-6 text-[10px] text-zinc-500 text-center">
            è³‡æ–™æ•´ç†è‡ªï¼šé‡æ…¶è‡ªç”±è¡Œ PDF ç­†è¨˜ / å°ç´…æ›¸å‚™å¿˜
          </div>
        </div>
      );
    };

    const SectionList = ({ title, subtitle, items, color }) => {
      const colorClassTitle =
        color === "amber" ? "text-amber-100" : "text-emerald-100";
      const bullet =
        color === "amber" ? "â—†" : "â—";

      return (
        <div className="mb-7">
          <div className="mb-2">
            <h3 className={`text-sm font-semibold ${colorClassTitle}`}>{title}</h3>
            <p className="text-[11px] text-zinc-500">{subtitle}</p>
          </div>
          <ul className="space-y-1.5">
            {items.map((t, i) => (
              <li
                key={i}
                className="text-[12px] text-zinc-300 flex gap-2"
              >
                <span className="mt-[3px] text-[9px] text-zinc-500">{bullet}</span>
                <span>{t}</span>
              </li>
            ))}
          </ul>
        </div>
      );
    };

    const NavButton = ({ icon, label, id, activeTab, setTab }) => (
      <button
        onClick={() => setTab(id)}
        className={`flex flex-col items-center gap-1 transition-all duration-300 ${
          activeTab === id ? "text-emerald-100 -translate-y-1" : "text-zinc-500"
        }`}
      >
        <div
          className={`p-2 rounded-full text-base ${
            activeTab === id
              ? "bg-emerald-400/90 text-slate-900 shadow-lg shadow-emerald-500/50"
              : "bg-transparent"
          }`}
        >
          {icon}
        </div>
        <span className="text-[10px] font-medium tracking-wide">{label}</span>
      </button>
    );

    const App = () => {
      const [activeTab, setActiveTab] = useState("itinerary");
      const [activeDay, setActiveDay] = useState(0);

      const [data, setData] = useState(() => {
        try {
          const saved = window.localStorage.getItem("cq-trip-v1");
          return saved ? JSON.parse(saved) : initialTripData;
        } catch (e) {
          return initialTripData;
        }
      });

      React.useEffect(() => {
        try {
          window.localStorage.setItem("cq-trip-v1", JSON.stringify(data));
        } catch (e) {}
      }, [data]);

      const renderContent = () => {
        switch (activeTab) {
          case "itinerary":
            return (
              <ItineraryView
                data={data}
                setData={setData}
                activeDay={activeDay}
                setActiveDay={setActiveDay}
              />
            );
          case "shopping":
            return <ShoppingView data={data} setData={setData} />;
          case "budget":
            return <BudgetView data={data} setData={setData} />;
          case "guide":
            return <GuideView data={data} setData={setData} />;
          default:
            return (
              <ItineraryView
                data={data}
                setData={setData}
                activeDay={activeDay}
                setActiveDay={setActiveDay}
              />
            );
        }
      };

      return (
        <div className="flex justify-center min-h-screen py-6">
          <div className="w-full max-w-md bg-[#050709] border border-zinc-800/80 rounded-3xl shadow-[0_25px_60px_rgba(0,0,0,0.75)] min-h-[640px] relative overflow-hidden flex flex-col grain">
            <div className="relative h-[260px] bg-black overflow-hidden">
              <img
                src="https://i.ibb.co/3yLY2yW1/Gemini-Generated-Image-xlrbfyxlrbfyxlrb.png"
                alt="Chongqing Night Alley"
                className="absolute inset-0 w-full h-full object-cover opacity-70"
              />
              <div className="absolute inset-0 bg-gradient-to-t from-black via-[#02070a]/80 to-transparent"></div>

              <div className="absolute top-5 right-5 flex gap-2 z-10 text-emerald-50">
                <button
                  onClick={() => setActiveTab("guide")}
                  className="w-9 h-9 rounded-full bg-black/45 border border-emerald-400/60 flex items-center justify-center text-sm backdrop-blur-md"
                  title="é¿å‘ç­†è¨˜"
                >
                  â„¹ï¸
                </button>
              </div>

              <div className="absolute bottom-14 left-5 right-5 z-10 text-white">
                <div className="flex items-center gap-2 mb-2">
                  <span className="px-2 py-1 bg-emerald-400/95 text-[10px] font-semibold text-slate-900 rounded tracking-[0.18em]">
                    MOUNTAIN CITY NIGHTS
                  </span>
                  <span className="text-[10px] text-emerald-100/80 tracking-[0.2em] uppercase">
                    {data.dateRange}
                  </span>
                </div>
                <h1 className="text-3xl font-bold tracking-tight text-shadow-lg">
                  {data.title}
                </h1>
                <p className="text-emerald-100/90 text-[13px] mt-1 flex items-center gap-1.5">
                  <span>ğŸ“</span>
                  <span>{data.subtitle}</span>
                </p>
              </div>
            </div>

            <div className="bg-gradient-to-t from-black via-[#05090c] to-[#05060a] flex-1 rounded-t-[2rem] -mt-6 z-20 shadow-[0_-18px_45px_rgba(0,0,0,0.85)] pb-24 flex flex-col border-t border-emerald-900/40">
              {renderContent()}
            </div>

            <div className="absolute bottom-0 left-0 right-0 h-20 bg-black/85 backdrop-blur-xl border-t border-zinc-800 flex items-center justify-around z-30">
              <NavButton icon="ğŸ“" label="è¡Œç¨‹" id="itinerary" activeTab={activeTab} setTab={setActiveTab} />
              <NavButton icon="ğŸ›ï¸" label="è³¼ç‰©" id="shopping" activeTab={activeTab} setTab={setActiveTab} />
              <NavButton icon="ğŸ’¸" label="é ç®—" id="budget" activeTab={activeTab} setTab={setActiveTab} />
              <NavButton icon="ğŸŒƒ" label="é¿å‘" id="guide" activeTab={activeTab} setTab={setActiveTab} />
            </div>
          </div>
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<App />);
  </script>
</body>
</html>
